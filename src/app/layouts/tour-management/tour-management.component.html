<div class="main-content">
  <div class="container-fluid">

    <div class="card">
      <div class="card-header card-header-danger">
        Add a new tour
      </div>
      <div class="card-body">

        <div class="row">
          <div class="col-6">
            <div class="row">
              <mat-form-field class="col-6">
                <input matInput type="text" placeholder="Name" required [(ngModel)]="insertTour.name" (change)="insertTour.title = insertTour.name; insertTour.url = encodingVietNamese(insertTour.name)">
                <!-- <mat-hint align="end"></mat-hint> -->
              </mat-form-field>

              <mat-form-field class="col-6">
                <input matInput type="text" placeholder="Title" required [(ngModel)]="insertTour.title">
                <mat-hint align="end" class="text-primary" (click)="insertTour.title = insertTour.name">copy from
                  name</mat-hint>
              </mat-form-field>
            </div>

            <div class="row">
              <mat-form-field class="col-6">
                <input matInput type="text" placeholder="Url" required [(ngModel)]="insertTour.url">
                <mat-hint align="end" class="text-primary" (click)="insertTour.url = encodingVietNamese(insertTour.name)">encodefrom
                  name</mat-hint>
              </mat-form-field>
              <mat-form-field class="col-6">
                <input matInput type="text" required placeholder="Image Url" [(ngModel)]="insertTour.imageUrl">
              </mat-form-field>
            </div>
            <br />

            <div class="row">
              <div class="col-6">
                <div class="row">
                  <mat-form-field class="col-6">
                    <input matInput type="text" placeholder="No. Date" required class="form-control" [(ngModel)]="insertTour.numberOfDate"
                      (change)="insertTour.numberOfNight = (insertTour.numberOfDate - 1)">
                  </mat-form-field>
                  <mat-form-field class="col-6">
                    <input matInput type="text" placeholder="No. Night" required class="form-control" [(ngModel)]="insertTour.numberOfNight">
                  </mat-form-field>
                </div>
                <div class="row">
                  <mat-form-field class="col-6">
                    <input matInput type="text" placeholder="Create at" required class="form-control" value="{{ insertTour.createAt | date }}">
                  </mat-form-field>
                  <mat-form-field class="col-6">
                    <input matInput type="text" placeholder="Create by" required class="form-control" value="{{ insertTour.createBy }}">
                  </mat-form-field>
                </div>
              </div>

              <div class="col-6">
                <label>Preview image</label>
                <img class="img-fluid" [src]="insertTour.imageUrl" (error)="previewImg.src='https://www.sylff.org/wp-content/uploads/2016/04/noImage.jpg'"
                  #previewImg />
              </div>

            </div>

            <div class="row">
              <mat-form-field class="col-12">
                <textarea matInput rows="5" placeholder="Description" [(ngModel)]="insertTour.description"></textarea>
              </mat-form-field>
            </div>

          </div>
          <div class="col-6">
            <div>Content</div>
            <ck-editor [config]="{htmlEncodeOutput: false, entities: false,  height: '300px'}" name="editContentTour"
              [(ngModel)]="insertTour.content" skin="moono-lisa" language="vi" [fullPage]="false"></ck-editor>
          </div>
        </div>
        <div class="row">
          <div class="d-flex col-12">
            <button type="submit" class="btn btn-style-6 mr-auto" (click)="addNewTour()">Save
              tour</button>
            <span *ngIf=" insertTour.id != 0">{{ 'Update tour#' + insertTour.id }}</span>
            <button type="submit" class="btn btn-style-6" (click)="updateTour()">Save change</button>
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-12">
        <div class="card">
          <div class="card-header card-header-danger">
            <h4 class="card-title ">Simple Table</h4>
            <p class="card-category"> Here is a subtitle for this table</p>
          </div>
          <div class="card-body">
            <div class="table-responsive">
              <!-- <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator> -->

              <table class="table" mat-table [dataSource]="tours" multiTemplateDataRows>
                <!-- ID Column -->
                <ng-container matColumnDef="id">
                  <th mat-header-cell class="text-primary" *matHeaderCellDef> ID </th>
                  <td mat-cell *matCellDef="let tour"> {{ tour.id }} </td>
                </ng-container>

                <!-- Name Column -->
                <ng-container matColumnDef="name">
                  <th mat-header-cell class="text-primary" *matHeaderCellDef> Name </th>
                  <td mat-cell *matCellDef="let tour"> {{ tour.name }} </td>
                </ng-container>

                <!-- Number Of Date/Night -->
                <!-- <ng-container matColumnDef="noDN">
                  <th mat-header-cell class="text-primary" *matHeaderCellDef> Number Of Date/Night </th>
                  <td mat-cell *matCellDef="let tour">{{ tour.numberOfDate }}/{{ tour.numberOfNight
                    }}</td>
                </ng-container> -->

                <!-- Action -->
                <!-- <ng-container matColumnDef="action" stickyEnd>
                  <th mat-header-cell class="text-primary" *matHeaderCellDef style="background-color: white"> Action
                  </th>
                  <td mat-cell *matCellDef="let tour" style="background-color: white">
                    <button mat-stroked-button color="accent" class="text-primary" (click)="openDialogAddPlan(tour)">Planning</button>
                  </td>
                </ng-container> -->


                <!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns -->
                <ng-container matColumnDef="expandedDetail">
                  <td class="pt-0 pb-0" mat-cell *matCellDef="let tour" [attr.colspan]="displayedColumns.length">
                    <div class="tour-detail" [@detailExpand]="tour == expandedTour ? 'expanded' : 'collapsed'">
                      <div class="card">
                        <div class="row container">
                          <div class="col-3 d-flex flex-column justify-content-around">
                            <img [src]="tour.imageUrl" alt="" class="img-fluid p-2">
                          </div>
                          <div class="col-9">
                            <h4 class="card-title">{{ tour.name }}</h4>
                            <p class="card-text">{{ tour.description }}<br />
                              <small>Number of Date/Night: {{ tour.numberOfDate }}/ {{ tour.numberOfNight }}</small>
                              <small>Create at {{ tour.createAt | date }} by <b>{{ tour.createBy }}</b></small>
                            </p>
                            <a href="/assests/{{ tour.content }}" class="card-link">View detail</a>
                          </div>
                        </div>
                      </div>
                    </div>
                  </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let tour; columns: displayedColumns;" class="tour-row"
                  [class.tour-expanded-row]="expandedTour === tour" (click)="expandedTour = tour">
                </tr>
                <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="tour-detail-row"></tr>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>